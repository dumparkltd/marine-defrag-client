(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{"8553794f0f48319ee1c9":function(e,t,n){"use strict";n.r(t);var a,i=n("8af190b70a6bc55c6f1b"),r=n.n(i),o=n("8a2d1b95e05b6a321e74"),c=n.n(o),s=n("d7dd51e1bf6bfc2c9c3d"),d=n("0d7f0986bcd2f33d8a2a"),f=n.n(d),u=n("ab039aecd4a1d4fedc0e"),l=n("1dfca9f44be16af281fa"),p=n("54f683fcda7806277002"),b=n("47e94b5ec55a17ebe237"),m=n("57b36dff0c422d2b9c67"),h=n("86b83146d2366c27fd7c"),y=n("a0eea3e3c7c0b7b70771"),g=n("fcb99a06256635f70435"),v=n("2157bd598f2b425595ea"),E=n("a72b40110d9c31c9b5c5"),O=n("6542cd13fd5dd1bcffd4"),j=n("fb88414ab887e57c7b57"),S=n("17a826745d7905c7f263"),w=n("4bbbd76528501909b843"),M=n("e4dd33cd8c3dbbd378c3"),P=n("2da65066c2da9f64c68a"),F=n("a28fc3c963a1d4d1a2e5"),R=n("0d5a1aa701766449187d"),D=Object(F.a)(function(e){return e.get("pageEdit")},function(e){return e}),C=Object(F.a)(function(e,t){return Object(O.ib)(e,{path:v.n.PAGES,id:t})},function(e){return Object(O.eb)(e,v.n.USERS)},function(e,t){return Object(R.l)(e,t)}),A=Object(u.defineMessages)({pageTitle:{id:"app.containers.PageEdit.pageTitle",defaultMessage:"Edit Page"},metaDescription:{id:"app.containers.PageEdit.metaDescription",defaultMessage:"Edit Page page description"},header:{id:"app.containers.PageEdit.header",defaultMessage:"Edit Page"},notFound:{id:"app.containers.PageEdit.notFound",defaultMessage:"Sorry no page found"}}),I=n("0a53423d610cdbe226ba");function _(e){return(_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,i){a||(a="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var c=new Array(o),s=0;s<o;s++)c[s]=arguments[s+3];t.children=c}if(t&&r)for(var d in r)void 0===t[d]&&(t[d]=r[d]);else t||(t=r||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=B(e);if(t){var i=B(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}(this,n)}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PageEdit",function(){return W});var J=k(S.a,{}),G=k(S.a,{}),W=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,r.a.Component);var t,n,a,i=T(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),H(U(t=i.call(this,e)),"getInitialFormData",function(e){var n=(e||t.props).viewEntity;return n?Object(p.Map)({id:n.get("id"),attributes:n.get("attributes").mergeWith(function(e,t){return null===e?t:e},I.b.get("attributes"))}):Object(p.Map)()}),H(U(t),"getHeaderMainFields",function(){var e=t.context.intl;return[{fields:[Object(b.z)(e.formatMessage),Object(b.o)(e.formatMessage),Object(b.n)(e.formatMessage)]}]}),H(U(t),"getHeaderAsideFields",function(e){var n=t.context.intl;return[{fields:[Object(b.x)(n.formatMessage),Object(m.m)(e)]}]}),H(U(t),"getBodyMainFields",function(){var e=t.context.intl;return[{fields:[Object(b.m)(e.formatMessage,!0,"content")]}]}),t.scrollContainer=r.a.createRef(),t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.props.loadEntitiesIfNeeded(),this.props.dataReady&&this.props.viewEntity&&this.props.initialiseForm("pageEdit.form.data",this.getInitialFormData())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.dataReady||this.props.loadEntitiesIfNeeded(),e.dataReady&&!this.props.dataReady&&e.viewEntity&&this.props.initialiseForm("pageEdit.form.data",this.getInitialFormData(e)),e.authReady&&!this.props.authReady&&this.props.redirectIfNotPermitted(),Object(y.a)(e,this.props)&&this.scrollContainer&&Object(h.d)(this.scrollContainer.current)}},{key:"render",value:function(){var e=this,t=this.context.intl,n=this.props,a=n.viewEntity,i=n.dataReady,o=n.viewDomain,c=this.props.params.id,s=o.get("page").toJS(),d=s.saveSending,l=s.saveError,p=s.deleteSending,b=s.deleteError,m=s.submitValid;return k("div",{},void 0,k(f.a,{title:"".concat(t.formatMessage(A.pageTitle),": ").concat(c),meta:[{name:"description",content:t.formatMessage(A.metaDescription)}]}),r.a.createElement(w.a,{ref:this.scrollContainer},k(M.a,{title:t.formatMessage(A.pageTitle),type:g.l,buttons:a&&i?[{type:"cancel",onClick:this.props.handleCancel},{type:"save",disabled:d,onClick:function(){return e.props.handleSubmitRemote("pageEdit.form.data")}}]:null}),!m&&k(j.a,{type:"error",messageKey:"submitInvalid",onDismiss:this.props.onErrorDismiss}),l&&k(j.a,{type:"error",messages:l.messages,onDismiss:this.props.onServerErrorDismiss}),b&&k(j.a,{type:"error",messages:b}),(d||p||!i)&&J,!a&&i&&!l&&!p&&k("div",{},void 0,r.a.createElement(u.FormattedMessage,A.notFound)),a&&i&&!p&&k(P.a,{model:"pageEdit.form.data",formData:o.getIn(["form","data"]),saving:d,handleSubmit:function(t){return e.props.handleSubmit(t)},handleSubmitFail:this.props.handleSubmitFail,handleCancel:this.props.handleCancel,handleUpdate:this.props.handleUpdate,handleDelete:this.props.isUserAdmin?this.props.handleDelete:null,fields:{header:{main:this.getHeaderMainFields(),aside:this.getHeaderAsideFields(a)},body:{main:this.getBodyMainFields(a)}},scrollContainer:this.scrollContainer.current}),(d||p)&&G))}}])&&x(t.prototype,n),a&&x(t,a),o}();W.contextTypes={intl:c.a.object.isRequired};t.default=Object(s.connect)(function(e,t){return{viewDomain:D(e),isUserAdmin:Object(O.vb)(e),dataReady:Object(O.Pb)(e,{path:I.a}),authReady:Object(O.Qb)(e),viewEntity:C(e,t.params.id)}},function(e,t){return{loadEntitiesIfNeeded:function(){I.a.forEach(function(t){return e(Object(E.s)(t))})},redirectIfNotPermitted:function(){e(Object(E.A)(v.M.ADMIN.value))},initialiseForm:function(t,n){e(l.actions.reset(t)),e(l.actions.change(t,n,{silent:!0}))},onErrorDismiss:function(){e(Object(E.Y)(!0))},onServerErrorDismiss:function(){e(Object(E.F)())},handleSubmitFail:function(){e(Object(E.Y)(!1))},handleSubmitRemote:function(t){e(l.actions.submit(t))},handleSubmit:function(t){var n;e((n=t.toJS(),{type:I.c,data:n}))},handleCancel:function(){e(Object(E.cb)("".concat(v.I.PAGES,"/").concat(t.params.id),{replace:!0}))},handleUpdate:function(t){e(Object(E.bb)(t))},handleDelete:function(){e(Object(E.h)({path:v.n.PAGES,id:t.params.id}))}}})(W)}}]);