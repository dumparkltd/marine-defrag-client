(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"293ad7aa37b8bbf7a534":function(e,t,r){"use strict";var o=r("0b3cb19af78752326f59"),n=r("6760403a719c9b65e90c"),a=o.default.div.withConfig({displayName:"DocumentWrap",componentId:"sswpnq-0"})(["display:block;border-bottom:1px solid ",";border-top:1px solid ",";padding:1em 0;"],Object(n.palette)("light",0),Object(n.palette)("light",0));t.a=a},"47b9ca394ae6084d7dbb":function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c});var o=r("c15d1c9d30171dc8ff35"),n=r("52147c536625ee918894"),a=r("2157bd598f2b425595ea");var i=function(e,t){var r=Object(o.filter)(e.fields,function(e){return!0===e.import&&!e.disabled}),i=Object(o.reduce)(r,function(e,r){var o="".concat(r.required?t(n.a.import.required):t(n.a.import.optional),": ").concat(t(n.a.import[r.type],{format:a.p}));return Object.assign(e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},function(e,t){var r=n.a.importFields[e.label]||n.a.importFields[e.attribute]?t(n.a.importFields[e.label||e.attribute]):t(n.a.attributes[e.label||e.attribute]);return"".concat(r," [database:").concat(e.attribute,"]")}(r,t),o))},{});return Object.assign(i,{"":t(n.a.import.hint)})},c=function(e){var t=e.split("[database:");return t.length>1?t[1].replace("]",""):e}},d64f602342ef261b0b54:function(e,t,r){"use strict";var o,n=r("8af190b70a6bc55c6f1b"),a=r.n(n),i=r("8a2d1b95e05b6a321e74"),c=r.n(i),s=r("1dfca9f44be16af281fa"),l=r("ab039aecd4a1d4fedc0e"),u=r("0b3cb19af78752326f59"),f=r("6760403a719c9b65e90c"),p=r("7443924afe5081acef92"),d=r.n(p),m=r("03606a381a8bba0a3ba9"),b=r.n(m),y=r("6b0cd370e854fbdb6989"),h=r("6e2c92ff32306ef7e8de"),g=r("10543a4540be5402ac6f"),v=r("1f1fc17bc34f95c5a284"),w=r("293ad7aa37b8bbf7a534"),O=r("fb88414ab887e57c7b57"),j=Object(l.defineMessages)({import:{single:{id:"app.components.ImportFileSelectControl.import.single",defaultMessage:"Import {total} row"},plural:{id:"app.components.ImportFileSelectControl.import.plural",defaultMessage:"Import {total} rows"}},selectFile:{id:"app.components.ImportFileSelectControl.selectFile",defaultMessage:"Select File"},fileSelectError:{id:"app.components.ImportFileSelectControl.fileSelectError",defaultMessage:"Error parsing file. Please make sure to use the correct format only."}});function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function F(e,t,r,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];t.children=c}if(t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function A(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=R(e);if(t){var n=R(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(this,r)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=u.default.div.withConfig({displayName:"SelectFile__Styled",componentId:"sc-1m2g80r-0"})(["padding-top:1em;display:block;"]),N=Object(u.default)(w.a).withConfig({displayName:"SelectFile__DocumentWrapEdit",componentId:"sc-1m2g80r-1"})(["background-color:",";position:relative;padding:0;border:1px solid ",";font-weight:500;max-width:100%;padding-right:35px;display:inline-block;vertical-align:top;"],Object(f.palette)("background",0),Object(f.palette)("light",1)),T=u.default.div.withConfig({displayName:"SelectFile__FileName",componentId:"sc-1m2g80r-2"})(["padding:1em 0.75em;overflow:hidden;line-height:normal;"]),H=Object(u.default)(g.a).withConfig({displayName:"SelectFile__Remove",componentId:"sc-1m2g80r-3"})(["display:block;position:absolute;right:0;top:0;bottom:0;padding:0 0.75em;color:",";&:hover{color:",";}@media (min-width:","){padding:0 0.75em;}"],Object(f.palette)("buttonFlat",1),Object(f.palette)("buttonFlatHover",1),function(e){return e.theme.breakpoints.medium}),z=Object(u.default)(h.a).withConfig({displayName:"SelectFile__ImportButton",componentId:"sc-1m2g80r-4"})(["white-space:nowrap;display:inline-block;vertical-align:top;border-top:1px solid;border-bottom:1px solid;border-color:",";"],Object(f.palette)("buttonDefault",1)),D=F(y.a,{name:"removeLarge"}),B=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,a.a.PureComponent);var t,r,o,n=C(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),k(P(e=n.call(this)),"onDismissErrors",function(t){void 0!==t&&t.preventDefault&&t.preventDefault(),e.setState({errors:[]})}),k(P(e),"handleChange",function(t,r){r.forEach(function(t){var r=S(t,2),o=r[0],n=r[1];try{var a=b.a.parse(o.target.result,{header:!0,skipEmptyLines:!0,delimiter:","});a&&a.errors&&a.errors.length>0?e.setState(function(e){return{errors:e.errors.concat(a.errors)}}):e.props.onChange({rows:a.data,meta:a.meta,file:n})}catch(t){e.setState(function(e){return{errors:e.errors.concat([{error:0}])}})}})}),k(P(e),"handleRemove",function(t){void 0!==t&&t.preventDefault&&t.preventDefault(),e.props.onChange(null)}),e.state={errors:[]},e}return t=i,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({errors:[]})}},{key:"render",value:function(){var e=this.context.intl;return F(x,{},void 0,this.state.errors.length>0&&F(O.a,{type:"error",messages:[e.formatMessage(j.fileSelectError)].concat(this.state.errors.map(function(e){return'Code: "'.concat(e.code,'", Message: "').concat(e.message,'"')})),onDismiss:this.onDismissErrors}),this.props.value&&0===this.state.errors.length&&F("div",{},void 0,F(N,{},void 0,F(T,{},void 0,this.props.value.file.name),F(H,{onClick:this.handleRemove},void 0,D)),F(z,{type:"submit",primary:!0},void 0,1===this.props.value.rows.length&&a.a.createElement(l.FormattedMessage,E({},j.import.single,{values:{total:this.props.value.rows.length}})),1!==this.props.value.rows.length&&a.a.createElement(l.FormattedMessage,E({},j.import.plural,{values:{total:this.props.value.rows.length}})))),!this.props.value&&0===this.state.errors.length&&F(d.a,{as:this.props.as,accept:this.props.accept,onChange:this.handleChange},void 0,F(v.a,{type:"button",title:e.formatMessage(j.selectFile),icon:"add"})))}}])&&A(t.prototype,r),o&&A(t,o),i}();B.contextTypes={intl:c.a.object.isRequired};var L=B,W=["model"];function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}t.a=function(e){var t=e.model,r=q(e,W);return a.a.createElement(s.Control.input,$({model:t,component:L},r))}},dda5805c6677c5fe2bbb:function(e,t,r){"use strict";r.r(t);var o=r("8af190b70a6bc55c6f1b"),n=r.n(o),a=r("8a2d1b95e05b6a321e74"),i=r.n(a),c=r("d7dd51e1bf6bfc2c9c3d"),s=r("0d7f0986bcd2f33d8a2a"),l=r.n(s),u=r("1dfca9f44be16af281fa"),f=r("54f683fcda7806277002"),p=r("fcb99a06256635f70435"),d=r("2157bd598f2b425595ea"),m=r("47b9ca394ae6084d7dbb"),b=r("968c3c585cf17da94a14"),y=r("b44905d53fb04dabb0f4"),h=r("a72b40110d9c31c9b5c5"),g=r("6542cd13fd5dd1bcffd4"),v=r("4bbbd76528501909b843"),w=r("e4dd33cd8c3dbbd378c3"),O=r("ab039aecd4a1d4fedc0e"),j=r("0b3cb19af78752326f59"),I=r("6760403a719c9b65e90c"),E=r("7326db3a9363e2c0a053"),F=r("c15d1c9d30171dc8ff35"),S=r("d34426aca6c662deb548"),_=r("08136e46427002abd20a"),A=r("cdd651a88cf0164e1d73"),M=r("fb88414ab887e57c7b57"),C=r("17a826745d7905c7f263"),P=r("293ad7aa37b8bbf7a534"),R=r("69ae87f0386018f96a9f"),k=r("35df506273a50fc50642"),x=r("6e2c92ff32306ef7e8de"),N=r("b05c165d93a6e8b63475"),T=r("d64f602342ef261b0b54"),H=r("03147599e73bd5b66ebf"),z=r("967bec6b215bf10d0539"),D=r("2dd381fa5bb2e4a33e7b"),B=r("c10acd93cc5c8ce9e329"),L=r("0dab8570f677aaedccc3"),W=Object(O.defineMessages)({title:{id:"app.components.ImportEntitiesForm.title",defaultMessage:"Batch import"},introduction:{id:"app.components.ImportEntitiesForm.introduction",defaultMessage:"Import multiple items from a CSV file."},hintTitle:{id:"app.components.ImportEntitiesForm.hintLabel",defaultMessage:"Please note:"},templateHint:{id:"app.components.ImportEntitiesForm.templateHint",defaultMessage:"For the available fields and field types please "},templateHintDownloadLink:{id:"app.components.ImportEntitiesForm.templateHintDownloadLink",defaultMessage:"download the CSV template"},formatHint:{id:"app.components.ImportEntitiesForm.formatHint",defaultMessage:'When saving from Excel (Office 2016 or later), chose file type "CSV UTF-8 (Comma delimited)". For instructions for previous versions of Excel (Office 2013 and earlier) please refer to the '},formatHintLink:{id:"app.components.ImportEntitiesForm.formatHintLink",defaultMessage:"user-manual.impactoss.org/managers/import.html"},formatHintLinkAnchor:{id:"app.components.ImportEntitiesForm.formatHintLinkAnchor",defaultMessage:"user manual"},someErrors:{id:"app.components.ImportEntitiesForm.someErrors",defaultMessage:"We are sorry, only {successNo} of {rowNo} row(s) could be imported."},allErrors:{id:"app.components.ImportEntitiesForm.allErrors",defaultMessage:"We are sorry, none of the rows could be imported."},success:{id:"app.components.ImportEntitiesForm.success",defaultMessage:"All {rowNo} row(s) successfully imported."},importAgain:{id:"app.components.ImportEntitiesForm.importAgain",defaultMessage:"Import another file"},done:{id:"app.components.ImportEntitiesForm.done",defaultMessage:"Back to indicator"},importing:{id:"app.components.ImportEntitiesForm.importing",defaultMessage:"Importing: "},rowErrorHint:{id:"app.components.ImportEntitiesForm.rowErrorHint",defaultMessage:"Import of the following rows failed:"},errorHintTitle:{id:"app.components.ImportEntitiesForm.errorHintTitle",defaultMessage:"Important"},errorHintText:{id:"app.components.ImportEntitiesForm.errorHintText",defaultMessage:"When using the import feature to add the failed rows, please make sure to first remove the successful rows from your csv file - failure to do so will lead to duplicate entries. Alternatively you can add each failed row individually by manually entering each entry."}});function $(e){return($="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var q,U=["id"];function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function V(e,t,r,o){q||(q="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&n)for(var s in n)void 0===t[s]&&(t[s]=n[s]);else t||(t=n||{});return{$$typeof:q,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function G(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=Z(e);if(t){var n=Z(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===$(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}(this,r)}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=Object(j.default)(u.Form).withConfig({displayName:"ImportActorActionsForm__StyledForm",componentId:"sc-1j53dau-0"})(["display:table;width:100%;"]),te=j.default.div.withConfig({displayName:"ImportActorActionsForm__Importing",componentId:"sc-1j53dau-1"})([""]),re=j.default.div.withConfig({displayName:"ImportActorActionsForm__ImportingText",componentId:"sc-1j53dau-2"})(["font-weight:bold;font-size:1em;color:",";margin-bottom:0.25em;margin-top:-0.5em;overflow:hidden;@media print{font-size:",";}"],Object(I.palette)("text",1),function(e){return e.theme.sizes.print.default}),oe=Object(j.default)(P.a).withConfig({displayName:"ImportActorActionsForm__DocumentWrapEdit",componentId:"sc-1j53dau-3"})(["background-color:",";position:relative;padding:1em 0.75em;"],Object(I.palette)("background",0)),ne=j.default.h2.withConfig({displayName:"ImportActorActionsForm__FormTitle",componentId:"sc-1j53dau-4"})(["padding-top:0;margin-top:0;"]),ae=j.default.div.withConfig({displayName:"ImportActorActionsForm__Intro",componentId:"sc-1j53dau-5"})(["margin-bottom:10px;@media (min-width:","){margin-bottom:16px;font-size:1.2em;}@media print{font-size:",";}"],function(e){return e.theme.breakpoints.medium},function(e){return e.theme.sizes.print.large}),ie=j.default.div.withConfig({displayName:"ImportActorActionsForm__Hint",componentId:"sc-1j53dau-6"})(["@media (min-width:","){margin-bottom:16px;font-size:1.2em;}@media print{font-size:",";}"],function(e){return e.theme.breakpoints.medium},function(e){return e.theme.sizes.print.large}),ce=j.default.div.withConfig({displayName:"ImportActorActionsForm__RowErrors",componentId:"sc-1j53dau-7"})(["margin-top:2em;"]),se=j.default.h6.withConfig({displayName:"ImportActorActionsForm__HintTitle",componentId:"sc-1j53dau-8"})(["margin:0;font-weight:normal;"]),le=j.default.div.withConfig({displayName:"ImportActorActionsForm__ErrorHint",componentId:"sc-1j53dau-9"})([""]),ue=j.default.h5.withConfig({displayName:"ImportActorActionsForm__ErrorHintTitle",componentId:"sc-1j53dau-10"})([""]),fe=j.default.p.withConfig({displayName:"ImportActorActionsForm__ErrorHintText",componentId:"sc-1j53dau-11"})([""]),pe=["label","component","controlType","children","errorMessages"],de=V(N.a,{}),me=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,n.a.PureComponent);var t,r,o,a=X(i);function i(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return e=a.call.apply(a,[this].concat(c)),t=Y(e),o=function(e){return Object(E.omit)(e,pe)},(r="getControlProps")in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,e}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.model,r=e.handleSubmit,o=e.handleCancel,a=e.handleReset,i=e.fieldModel,c=e.formData,s=e.progress,l=e.errors,u=e.success,f=this.context.intl,p={id:"file",model:".".concat(i),placeholder:"filename"},d=this.getControlProps(p),m=d.id,b=G(d,U);return V(H.a,{white:!0},void 0,V(ee,{model:t,onSubmit:function(e){return null!==e.get("import")&&r(e)}},void 0,V(z.a,{},void 0,V(_.a,{},void 0,V(A.a,{bottom:!0},void 0,V(R.a,{},void 0,V(ne,{},void 0,n.a.createElement(O.FormattedMessage,W.title)),V(ae,{},void 0,n.a.createElement(O.FormattedMessage,W.introduction)),V(ie,{},void 0,V(se,{},void 0,n.a.createElement(O.FormattedMessage,W.hintTitle))),V(S.a,{noPadding:!0},void 0,V(D.a,{},void 0,null===s&&n.a.createElement(T.a,J({id:m,model:p.model,as:"text",accept:".csv, text/csv"},b)),null!==s&&V("div",{},void 0,s<100&&V(oe,{},void 0,V(te,{},void 0,V(re,{},void 0,n.a.createElement(O.FormattedMessage,W.importing),c&&'"'.concat(c.get("import").file.name,'"')),V(C.a,{progress:s}))),s>=100&&V("div",{},void 0,l.size>0&&0===u.size&&V(M.a,{type:"error",message:f.formatMessage(W.allErrors)}),l.size>0&&u.size>0&&V(M.a,{type:"error",message:f.formatMessage(W.someErrors,{successNo:u.size,rowNo:l.size+u.size})}),0===l.size&&V(M.a,{type:"success",message:f.formatMessage(W.success,{rowNo:u.size})})),l.size>0&&V(ce,{},void 0,n.a.createElement(O.FormattedMessage,W.rowErrorHint),V(M.a,{type:"error",details:!0,preMessage:!1,messages:l.sortBy(function(e){return e&&e.data&&e.data.saveRef}).reduce(function(e,t){return t.error.messages?e.concat(Object(F.map)(t.error.messages,function(e){return t.data.saveRef?["".concat(t.data.saveRef,":"),e]:e})):e},[])})),l.size>0&&s>=100&&V(le,{},void 0,V(ue,{},void 0,n.a.createElement(O.FormattedMessage,W.errorHintTitle)),V(fe,{},void 0,n.a.createElement(O.FormattedMessage,W.errorHintText)))))))))),s>=100&&V(B.a,{},void 0,V(L.a,{},void 0,V(k.a,{type:"button",onClick:a},void 0,n.a.createElement(O.FormattedMessage,W.importAgain)),V(x.a,{type:"button",onClick:o},void 0,n.a.createElement(O.FormattedMessage,W.done))),de)))}}])&&K(t.prototype,r),o&&K(t,o),i}();me.contextTypes={intl:i.a.object.isRequired};var be,ye=me,he=r("a28fc3c963a1d4d1a2e5"),ge=function(e){return e.get("actorActionsImport")},ve=Object(he.a)(ge,function(e){return e.get("form").data?e.get("form").data:null}),we=Object(he.a)(ge,function(e){return e.get("page")}),Oe=Object(he.a)(we,function(e){return e.get("errors")}),je=Object(he.a)(we,function(e){return e.get("success")}),Ie=Object(he.a)(we,function(e){return e.get("sending")&&e.get("sending").size>0?(e.get("success").size+e.get("errors").size)/e.get("sending").size*100:null}),Ee=Object(O.defineMessages)({pageTitle:{id:"app.containers.ActorActionsImport.pageTitle",defaultMessage:"Import actor connections with values"},metaDescription:{id:"app.containers.ActorActionsImport.metaDescription",defaultMessage:"Import Actors page description"},header:{id:"app.containers.ActorActionsImport.header",defaultMessage:"Import actor connections with values"}}),Fe=r("e9b2f4bc8d02e177734e");function Se(){return{type:Fe.c}}function _e(e){return(_e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t,r,o){be||(be="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&n)for(var s in n)void 0===t[s]&&(t[s]=n[s]);else t||(t=n||{});return{$$typeof:be,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Me(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=Re(e);if(t){var n=Re(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"ActorActionsImport",function(){return ke});var ke=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(i,n.a.PureComponent);var t,r,o,a=Pe(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.dataReady&&this.props.initialiseForm("actorImport.form.data",Fe.b)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.dataReady||this.props.loadEntitiesIfNeeded(),e.dataReady&&!this.props.dataReady&&this.props.initialiseForm("actorImport.form.data",Fe.b),e.authReady&&!this.props.authReady&&this.props.redirectIfNotPermitted()}},{key:"render",value:function(){var e=this,t=this.context.intl;return Ae("div",{},void 0,Ae(l.a,{title:"".concat(t.formatMessage(Ee.pageTitle)),meta:[{name:"description",content:t.formatMessage(Ee.metaDescription)}]}),Ae(v.a,{},void 0,Ae(w.a,{title:t.formatMessage(Ee.pageTitle),type:p.l,buttons:[{type:"cancel",onClick:this.props.handleCancel}]}),Ae(ye,{model:"actorActionsImport.form.data",fieldModel:"import",formData:this.props.formData,handleSubmit:function(t){return e.props.handleSubmit(t,e.props.actors,e.props.params.id)},handleCancel:this.props.handleCancel,handleReset:this.props.handleReset,resetProgress:this.props.resetProgress,errors:this.props.errors,success:this.props.success,progress:this.props.progress,action:this.props.action})))}}])&&Me(t.prototype,r),o&&Me(t,o),i}();ke.contextTypes={intl:i.a.object.isRequired};var xe=["value"];t.default=Object(c.connect)(function(e,t){var r=t.params;return{formData:ve(e),progress:Ie(e),errors:Oe(e),success:je(e),action:Object(g.b)(e,r.id),actors:Object(g.L)(e),dataReady:Object(g.Pb)(e,{path:Fe.a}),authReady:Object(g.Qb)(e)}},function(e,t){var r=t.params;return{loadEntitiesIfNeeded:function(){Fe.a.forEach(function(t){return e(Object(h.s)(t))})},resetProgress:function(){e(Object(h.C)()),e(Se())},initialiseForm:function(t,r){e(u.actions.load(t,r))},redirectIfNotPermitted:function(){e(Object(h.A)(d.M.MANAGER.value))},handleSubmit:function(t,r,o){null!==t.get("import")&&Object(f.fromJS)(t.get("import").rows).forEach(function(t,n){var a,i=t.mapKeys(function(e){return Object(m.a)(e)}),c=r.find(function(e){return Object(b.a)(e.getIn(["attributes","code"]),i.get("code"))}),s={attributes:i.filter(function(e,t){return xe.indexOf(t)>-1}).map(function(e,t){return"value"===t&&Object(y.a)(e)?parseFloat(e):null}).set("actor_id",c?c.get("id"):"").set("measure_id",o).toJS(),saveRef:n+1};e((a=s,{type:Fe.d,data:a}))})},handleCancel:function(){e(Object(h.cb)("".concat(d.I.ACTION,"/").concat(r.id)))},handleReset:function(){e(Object(h.C)()),e(Se())}}})(ke)}}]);