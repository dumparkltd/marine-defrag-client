(window.webpackJsonp=window.webpackJsonp||[]).push([[60,35,50],{"293ad7aa37b8bbf7a534":function(e,t,r){"use strict";var o=r("0b3cb19af78752326f59"),n=r("6760403a719c9b65e90c"),a=o.default.div.withConfig({displayName:"DocumentWrap",componentId:"sswpnq-0"})(["display:block;border-bottom:1px solid ",";border-top:1px solid ",";padding:1em 0;"],Object(n.palette)("light",0),Object(n.palette)("light",0));t.a=a},"47b9ca394ae6084d7dbb":function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c});var o=r("c15d1c9d30171dc8ff35"),n=r("52147c536625ee918894"),a=r("2157bd598f2b425595ea");var i=function(e,t){var r=Object(o.filter)(e.fields,function(e){return!0===e.import&&!e.disabled}),i=Object(o.reduce)(r,function(e,r){var o="".concat(r.required?t(n.a.import.required):t(n.a.import.optional),": ").concat(t(n.a.import[r.type],{format:a.p}));return Object.assign(e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},function(e,t){var r=n.a.importFields[e.label]||n.a.importFields[e.attribute]?t(n.a.importFields[e.label||e.attribute]):t(n.a.attributes[e.label||e.attribute]);return"".concat(r," [database:").concat(e.attribute,"]")}(r,t),o))},{});return Object.assign(i,{"":t(n.a.import.hint)})},c=function(e){var t=e.split("[database:");return t.length>1?t[1].replace("]",""):e}},"7443924afe5081acef92":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r("8af190b70a6bc55c6f1b")),l=r("63f14ac74ce296f77f4d"),s=(o=l)&&o.__esModule?o:{default:o};var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleChange=function(e){var t=Array.prototype.slice.call(e.target.files),o=(r.props.as||"url").toLowerCase();Promise.all(t.map(function(e){return new Promise(function(t,r){var n=new FileReader;switch(n.onload=function(r){t([r,e])},o){case"binary":n.readAsBinaryString(e);break;case"buffer":n.readAsArrayBuffer(e);break;case"text":n.readAsText(e);break;case"url":n.readAsDataURL(e)}})})).then(function(t){r.props.onChange(e,t)})},r.triggerInput=function(){var e=s.default.findDOMNode(r._reactFileReaderInput);e&&e.click()};var o="object"===("undefined"===typeof window?"undefined":a(window))?window:{};return o.File&&o.FileReader&&o.FileList&&o.Blob||console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=(t.as,t.children),o=t.style,a=function(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}(t,["as","children","style"]),i=r?{position:"absolute",top:"-9999px"}:{};return c.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:o},c.createElement("input",n({},a,{type:"file",ref:function(t){e._reactFileReaderInput=t},onChange:this.handleChange,onClick:function(){e._reactFileReaderInput.value=null},style:i})),r)}}]),t}();t.default=f},a6fc95b164eaaade27a0:function(e,t,r){"use strict";r.r(t);var o,n=r("8af190b70a6bc55c6f1b"),a=r.n(n),i=r("8a2d1b95e05b6a321e74"),c=r.n(i),l=r("d7dd51e1bf6bfc2c9c3d"),s=r("0d7f0986bcd2f33d8a2a"),f=r.n(s),u=r("1dfca9f44be16af281fa"),p=r("bf25f59755b69bd98fe0"),d=r("54f683fcda7806277002"),m=r("fcb99a06256635f70435"),b=r("2157bd598f2b425595ea"),y=r("47b9ca394ae6084d7dbb"),g=r("0d5a1aa701766449187d"),h=r("29116d429d98c5d3cb3f"),v=r("a72b40110d9c31c9b5c5"),w=r("6542cd13fd5dd1bcffd4"),O=r("4bbbd76528501909b843"),E=r("e4dd33cd8c3dbbd378c3"),j=r("aedd2b436280b115f11f"),I=r("a28fc3c963a1d4d1a2e5"),_=function(e){return e.get("actionImport")},S=Object(I.a)(_,function(e){return e.get("form").data?e.get("form").data:null}),F=Object(I.a)(_,function(e){return e.get("page")}),k=Object(I.a)(F,function(e){return e.get("errors")}),M=Object(I.a)(F,function(e){return e.get("success")}),C=Object(I.a)(F,function(e){return e.get("sending")&&e.get("sending").size>0?(e.get("success").size+e.get("errors").size)/e.get("sending").size*100:null}),R=r("ab039aecd4a1d4fedc0e"),P=Object(R.defineMessages)({pageTitle:{id:"app.containers.ActionImport.pageTitle",defaultMessage:"Import Actions"},metaDescription:{id:"app.containers.ActionImport.metaDescription",defaultMessage:"Import Actions page description"},header:{id:"app.containers.ActionImport.header",defaultMessage:"Import Actions"},filename:{id:"app.containers.ActionImport.filename",defaultMessage:"actions_template"}}),A=r("d488eb764502f00269c0");function T(){return{type:A.b}}function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function D(e,t,r,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var c=new Array(i),l=0;l<i;l++)c[l]=arguments[l+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function z(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=U(e);if(t){var n=U(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"ActionImport",function(){return W});var W=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,a.a.PureComponent);var t,r,o,n=B(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=i,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.dataReady&&this.props.initialiseForm("actionImport.form.data",A.a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.dataReady||this.props.loadEntitiesIfNeeded(),e.dataReady&&!this.props.dataReady&&this.props.initialiseForm("actionImport.form.data",A.a),e.authReady&&!this.props.authReady&&this.props.redirectIfNotPermitted()}},{key:"render",value:function(){var e=this,t=this.context.intl;return D("div",{},void 0,D(f.a,{title:"".concat(t.formatMessage(P.pageTitle)),meta:[{name:"description",content:t.formatMessage(P.metaDescription)}]}),D(O.a,{},void 0,D(E.a,{title:t.formatMessage(P.pageTitle),type:m.l,icon:"actions",buttons:[{type:"cancel",onClick:this.props.handleCancel}]}),D(j.a,{model:"actionImport.form.data",fieldModel:"import",formData:this.props.formData,handleSubmit:function(t){return e.props.handleSubmit(t)},handleCancel:this.props.handleCancel,handleReset:this.props.handleReset,resetProgress:this.props.resetProgress,errors:this.props.errors,success:this.props.success,progress:this.props.progress,template:{filename:"".concat(t.formatMessage(P.filename),".csv"),data:Object(y.b)({fields:Object.keys(b.h.ATTRIBUTES).reduce(function(e,t){var r=b.h.ATTRIBUTES[t];return r.skipImport?e:[].concat(N(e),[{attribute:t,type:r.type||"text",required:!!r.required,import:!0}])},[])},t.formatMessage)}})))}}])&&z(t.prototype,r),o&&z(t,o),i}();W.contextTypes={intl:c.a.object.isRequired};t.default=Object(l.connect)(function(e){return{formData:S(e),progress:C(e),errors:k(e),success:M(e),dataReady:Object(w.Pb)(e,{path:[b.n.USER_ROLES]}),authReady:Object(w.Qb)(e)}},function(e){return{loadEntitiesIfNeeded:function(){e(Object(v.s)(b.n.USER_ROLES))},resetProgress:function(){e(Object(v.C)()),e(T())},redirectIfNotPermitted:function(){e(Object(v.A)(b.M.MANAGER.value))},initialiseForm:function(t,r){e(u.actions.load(t,r))},handleSubmit:function(t){null!==t.get("import")&&Object(d.fromJS)(t.get("import").rows).forEach(function(t,r){var o,n=t.mapKeys(function(e){return Object(y.a)(e)}),a=n.get("measuretype_id"),i={attributes:n.filter(function(e,t){return Object(g.a)(a,t)}).map(function(e,t){return"date"===b.h.ATTRIBUTES[t].type&&e&&""!==e.trim()?Object(h.a)(e,b.p)?Object(p.format)(Object(p.parse)(e,b.p,new Date),b.o):"":e}).set("draft",!0).toJS(),saveRef:r+1};e((o=i,{type:A.c,data:o}))})},handleCancel:function(){e(Object(v.cb)(b.I.ACTIONS))},handleReset:function(){e(Object(v.C)()),e(T())}}})(W)},aedd2b436280b115f11f:function(e,t,r){"use strict";var o=r("8af190b70a6bc55c6f1b"),n=r.n(o),a=r("8a2d1b95e05b6a321e74"),i=r.n(a),c=r("ab039aecd4a1d4fedc0e"),l=r("1dfca9f44be16af281fa"),s=r("50e2159ebfd6ed6b8934"),f=r.n(s),u=r("0b3cb19af78752326f59"),p=r("6760403a719c9b65e90c"),d=r("7326db3a9363e2c0a053"),m=r("c15d1c9d30171dc8ff35"),b=r("7f08b9dcf3783d315194"),y=r("b0c3e4c5e0f01c80fe6d"),g=r("d34426aca6c662deb548"),h=r("08136e46427002abd20a"),v=r("cdd651a88cf0164e1d73"),w=r("fb88414ab887e57c7b57"),O=r("17a826745d7905c7f263"),E=r("293ad7aa37b8bbf7a534"),j=r("69ae87f0386018f96a9f"),I=r("35df506273a50fc50642"),_=r("6e2c92ff32306ef7e8de"),S=r("b05c165d93a6e8b63475"),F=r("d64f602342ef261b0b54"),k=r("03147599e73bd5b66ebf"),M=r("967bec6b215bf10d0539"),C=r("2dd381fa5bb2e4a33e7b"),R=r("c10acd93cc5c8ce9e329"),P=r("0dab8570f677aaedccc3"),A=Object(c.defineMessages)({title:{id:"app.components.ImportEntitiesForm.title",defaultMessage:"Batch import"},introduction:{id:"app.components.ImportEntitiesForm.introduction",defaultMessage:"Import multiple items from a CSV file."},hintTitle:{id:"app.components.ImportEntitiesForm.hintLabel",defaultMessage:"Please note:"},templateHint:{id:"app.components.ImportEntitiesForm.templateHint",defaultMessage:"For the available fields and field types please "},templateHintDownloadLink:{id:"app.components.ImportEntitiesForm.templateHintDownloadLink",defaultMessage:"download the CSV template"},formatHint:{id:"app.components.ImportEntitiesForm.formatHint",defaultMessage:'When saving from Excel (Office 2016 or later), chose file type "CSV UTF-8 (Comma delimited)". For instructions for previous versions of Excel (Office 2013 and earlier) please refer to the '},formatHintLink:{id:"app.components.ImportEntitiesForm.formatHintLink",defaultMessage:"user-manual.impactoss.org/managers/import.html"},formatHintLinkAnchor:{id:"app.components.ImportEntitiesForm.formatHintLinkAnchor",defaultMessage:"user manual"},someErrors:{id:"app.components.ImportEntitiesForm.someErrors",defaultMessage:"We are sorry, only {successNo} of {rowNo} row(s) could be imported."},allErrors:{id:"app.components.ImportEntitiesForm.allErrors",defaultMessage:"We are sorry, none of the rows could be imported."},success:{id:"app.components.ImportEntitiesForm.success",defaultMessage:"All {rowNo} row(s) successfully imported."},importAgain:{id:"app.components.ImportEntitiesForm.importAgain",defaultMessage:"Import another file"},done:{id:"app.components.ImportEntitiesForm.done",defaultMessage:"Back to list"},importing:{id:"app.components.ImportEntitiesForm.importing",defaultMessage:"Importing: "},rowErrorHint:{id:"app.components.ImportEntitiesForm.rowErrorHint",defaultMessage:"Import of the following rows failed:"},errorHintTitle:{id:"app.components.ImportEntitiesForm.errorHintTitle",defaultMessage:"Important"},errorHintText:{id:"app.components.ImportEntitiesForm.errorHintText",defaultMessage:"When using the import feature to add the failed rows, please make sure to first remove the successful rows from your csv file - failure to do so will lead to duplicate entries. Alternatively you can add each failed row individually by manually entering each entry."}});function T(e){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x,N=["id"];function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function D(e,t,r,o){x||(x="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&n)for(var l in n)void 0===t[l]&&(t[l]=n[l]);else t||(t=n||{});return{$$typeof:x,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function z(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=q(e);if(t){var n=q(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}(this,r)}}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=Object(u.default)(l.Form).withConfig({displayName:"ImportEntitiesForm__StyledForm",componentId:"olkltg-0"})(["display:table;width:100%;"]),J=u.default.div.withConfig({displayName:"ImportEntitiesForm__Importing",componentId:"olkltg-1"})([""]),V=u.default.div.withConfig({displayName:"ImportEntitiesForm__ImportingText",componentId:"olkltg-2"})(["font-weight:bold;font-size:1em;color:",";margin-bottom:0.25em;margin-top:-0.5em;overflow:hidden;@media print{font-size:",";}"],Object(p.palette)("text",1),function(e){return e.theme.sizes.print.default}),G=Object(u.default)(E.a).withConfig({displayName:"ImportEntitiesForm__DocumentWrapEdit",componentId:"olkltg-3"})(["background-color:",";position:relative;padding:1em 0.75em;"],Object(p.palette)("background",0)),K=u.default.h2.withConfig({displayName:"ImportEntitiesForm__FormTitle",componentId:"olkltg-4"})(["padding-top:0;margin-top:0;"]),Q=u.default.div.withConfig({displayName:"ImportEntitiesForm__Intro",componentId:"olkltg-5"})(["margin-bottom:10px;@media (min-width:","){margin-bottom:16px;font-size:1.2em;}@media print{font-size:",";}"],function(e){return e.theme.breakpoints.medium},function(e){return e.theme.sizes.print.large}),X=u.default.div.withConfig({displayName:"ImportEntitiesForm__Hint",componentId:"olkltg-6"})(["@media (min-width:","){margin-bottom:16px;font-size:1.2em;}@media print{font-size:",";}"],function(e){return e.theme.breakpoints.medium},function(e){return e.theme.sizes.print.large}),Y=u.default.span.withConfig({displayName:"ImportEntitiesForm__CsvDownload",componentId:"olkltg-7"})(["display:inline-block;"]),Z=Object(u.default)(y.a).withConfig({displayName:"ImportEntitiesForm__NoteLink",componentId:"olkltg-8"})(["font-weight:bold;"]),ee=u.default.div.withConfig({displayName:"ImportEntitiesForm__RowErrors",componentId:"olkltg-9"})(["margin-top:2em;"]),te=u.default.ul.withConfig({displayName:"ImportEntitiesForm__HintList",componentId:"olkltg-10"})(["margin:10px 0;"]),re=u.default.h6.withConfig({displayName:"ImportEntitiesForm__HintTitle",componentId:"olkltg-11"})(["margin:0;font-weight:normal;"]),oe=u.default.div.withConfig({displayName:"ImportEntitiesForm__ErrorHint",componentId:"olkltg-12"})([""]),ne=u.default.h5.withConfig({displayName:"ImportEntitiesForm__ErrorHintTitle",componentId:"olkltg-13"})([""]),ae=u.default.p.withConfig({displayName:"ImportEntitiesForm__ErrorHintText",componentId:"olkltg-14"})([""]),ie=["label","component","controlType","children","errorMessages"],ce=D(S.a,{}),le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(i,n.a.PureComponent);var t,r,o,a=U(i);function i(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return e=a.call.apply(a,[this].concat(c)),t=W(e),o=function(e){return Object(d.omit)(e,ie)},(r="getControlProps")in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,e}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.model,r=e.handleSubmit,o=e.handleCancel,a=e.handleReset,i=e.fieldModel,l=e.template,s=e.formData,u=e.progress,p=e.errors,d=e.success,E=this.context.intl,S={id:"file",model:".".concat(i),placeholder:"filename"},T=this.getControlProps(S),x=T.id,L=z(T,N);return D(k.a,{white:!0},void 0,D($,{model:t,onSubmit:function(e){return null!==e.get("import")&&r(e)}},void 0,D(M.a,{},void 0,D(h.a,{},void 0,D(v.a,{bottom:!0},void 0,D(j.a,{},void 0,D(K,{},void 0,n.a.createElement(c.FormattedMessage,A.title)),D(Q,{},void 0,n.a.createElement(c.FormattedMessage,A.introduction)),D(X,{},void 0,D(re,{},void 0,n.a.createElement(c.FormattedMessage,A.hintTitle)),D(te,{},void 0,D("li",{},void 0,n.a.createElement(c.FormattedMessage,A.templateHint),D(Y,{},void 0,D(f.a,{datas:Object(b.a)(l.data),filename:l.filename},void 0,D(Z,{href:"/",onClick:function(e){return e.preventDefault()}},void 0,n.a.createElement(c.FormattedMessage,A.templateHintDownloadLink))))),D("li",{},void 0,n.a.createElement(c.FormattedMessage,A.formatHint),A.formatHintLink&&""!==A.formatHintLink&&D(y.a,{href:E.formatMessage(A.formatHintLink),target:"_blank"},void 0,E.formatMessage(A.formatHintLinkAnchor))))),D(g.a,{noPadding:!0},void 0,D(C.a,{},void 0,null===u&&n.a.createElement(F.a,H({id:x,model:S.model,as:"text",accept:".csv, text/csv"},L)),null!==u&&D("div",{},void 0,u<100&&D(G,{},void 0,D(J,{},void 0,D(V,{},void 0,n.a.createElement(c.FormattedMessage,A.importing),s&&'"'.concat(s.get("import").file.name,'"')),D(O.a,{progress:u}))),u>=100&&D("div",{},void 0,p.size>0&&0===d.size&&D(w.a,{type:"error",message:E.formatMessage(A.allErrors)}),p.size>0&&d.size>0&&D(w.a,{type:"error",message:E.formatMessage(A.someErrors,{successNo:d.size,rowNo:p.size+d.size})}),0===p.size&&D(w.a,{type:"success",message:E.formatMessage(A.success,{rowNo:d.size})})),p.size>0&&D(ee,{},void 0,n.a.createElement(c.FormattedMessage,A.rowErrorHint),D(w.a,{type:"error",details:!0,preMessage:!1,messages:p.sortBy(function(e){return e&&e.data&&e.data.saveRef}).reduce(function(e,t){return t.error.messages?e.concat(Object(m.map)(t.error.messages,function(e){return t.data.saveRef?["".concat(t.data.saveRef,":"),e]:e})):e},[])})),p.size>0&&u>=100&&D(oe,{},void 0,D(ne,{},void 0,n.a.createElement(c.FormattedMessage,A.errorHintTitle)),D(ae,{},void 0,n.a.createElement(c.FormattedMessage,A.errorHintText)))))))))),u>=100&&D(R.a,{},void 0,D(P.a,{},void 0,D(I.a,{type:"button",onClick:a},void 0,n.a.createElement(c.FormattedMessage,A.importAgain)),D(_.a,{type:"button",onClick:o},void 0,n.a.createElement(c.FormattedMessage,A.done))),ce)))}}])&&L(t.prototype,r),o&&L(t,o),i}();le.contextTypes={intl:i.a.object.isRequired};t.a=le},d488eb764502f00269c0:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"a",function(){return i});var o=r("54f683fcda7806277002"),n="impactoss/ActionImport/SAVE",a="impactoss/ActionImport/RESET_FORM",i=Object(o.fromJS)({import:null})},d64f602342ef261b0b54:function(e,t,r){"use strict";var o,n=r("8af190b70a6bc55c6f1b"),a=r.n(n),i=r("8a2d1b95e05b6a321e74"),c=r.n(i),l=r("1dfca9f44be16af281fa"),s=r("ab039aecd4a1d4fedc0e"),f=r("0b3cb19af78752326f59"),u=r("6760403a719c9b65e90c"),p=r("7443924afe5081acef92"),d=r.n(p),m=r("03606a381a8bba0a3ba9"),b=r.n(m),y=r("6b0cd370e854fbdb6989"),g=r("6e2c92ff32306ef7e8de"),h=r("10543a4540be5402ac6f"),v=r("1f1fc17bc34f95c5a284"),w=r("293ad7aa37b8bbf7a534"),O=r("fb88414ab887e57c7b57"),E=Object(s.defineMessages)({import:{single:{id:"app.components.ImportFileSelectControl.import.single",defaultMessage:"Import {total} row"},plural:{id:"app.components.ImportFileSelectControl.import.plural",defaultMessage:"Import {total} rows"}},selectFile:{id:"app.components.ImportFileSelectControl.selectFile",defaultMessage:"Select File"},fileSelectError:{id:"app.components.ImportFileSelectControl.fileSelectError",defaultMessage:"Error parsing file. Please make sure to use the correct format only."}});function j(e){return(j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function _(e,t,r,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var c=new Array(i),l=0;l<i;l++)c[l]=arguments[l+3];t.children=c}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function k(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=P(e);if(t){var n=P(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}(this,r)}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=f.default.div.withConfig({displayName:"SelectFile__Styled",componentId:"sc-1m2g80r-0"})(["padding-top:1em;display:block;"]),x=Object(f.default)(w.a).withConfig({displayName:"SelectFile__DocumentWrapEdit",componentId:"sc-1m2g80r-1"})(["background-color:",";position:relative;padding:0;border:1px solid ",";font-weight:500;max-width:100%;padding-right:35px;display:inline-block;vertical-align:top;"],Object(u.palette)("background",0),Object(u.palette)("light",1)),N=f.default.div.withConfig({displayName:"SelectFile__FileName",componentId:"sc-1m2g80r-2"})(["padding:1em 0.75em;overflow:hidden;line-height:normal;"]),H=Object(f.default)(h.a).withConfig({displayName:"SelectFile__Remove",componentId:"sc-1m2g80r-3"})(["display:block;position:absolute;right:0;top:0;bottom:0;padding:0 0.75em;color:",";&:hover{color:",";}@media (min-width:","){padding:0 0.75em;}"],Object(u.palette)("buttonFlat",1),Object(u.palette)("buttonFlatHover",1),function(e){return e.theme.breakpoints.medium}),D=Object(f.default)(g.a).withConfig({displayName:"SelectFile__ImportButton",componentId:"sc-1m2g80r-4"})(["white-space:nowrap;display:inline-block;vertical-align:top;border-top:1px solid;border-bottom:1px solid;border-color:",";"],Object(u.palette)("buttonDefault",1)),z=_(y.a,{name:"removeLarge"}),L=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,a.a.PureComponent);var t,r,o,n=C(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),A(R(e=n.call(this)),"onDismissErrors",function(t){void 0!==t&&t.preventDefault&&t.preventDefault(),e.setState({errors:[]})}),A(R(e),"handleChange",function(t,r){r.forEach(function(t){var r=S(t,2),o=r[0],n=r[1];try{var a=b.a.parse(o.target.result,{header:!0,skipEmptyLines:!0,delimiter:","});a&&a.errors&&a.errors.length>0?e.setState(function(e){return{errors:e.errors.concat(a.errors)}}):e.props.onChange({rows:a.data,meta:a.meta,file:n})}catch(t){e.setState(function(e){return{errors:e.errors.concat([{error:0}])}})}})}),A(R(e),"handleRemove",function(t){void 0!==t&&t.preventDefault&&t.preventDefault(),e.props.onChange(null)}),e.state={errors:[]},e}return t=i,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({errors:[]})}},{key:"render",value:function(){var e=this.context.intl;return _(T,{},void 0,this.state.errors.length>0&&_(O.a,{type:"error",messages:[e.formatMessage(E.fileSelectError)].concat(this.state.errors.map(function(e){return'Code: "'.concat(e.code,'", Message: "').concat(e.message,'"')})),onDismiss:this.onDismissErrors}),this.props.value&&0===this.state.errors.length&&_("div",{},void 0,_(x,{},void 0,_(N,{},void 0,this.props.value.file.name),_(H,{onClick:this.handleRemove},void 0,z)),_(D,{type:"submit",primary:!0},void 0,1===this.props.value.rows.length&&a.a.createElement(s.FormattedMessage,I({},E.import.single,{values:{total:this.props.value.rows.length}})),1!==this.props.value.rows.length&&a.a.createElement(s.FormattedMessage,I({},E.import.plural,{values:{total:this.props.value.rows.length}})))),!this.props.value&&0===this.state.errors.length&&_(d.a,{as:this.props.as,accept:this.props.accept,onChange:this.handleChange},void 0,_(v.a,{type:"button",title:e.formatMessage(E.selectFile),icon:"add"})))}}])&&k(t.prototype,r),o&&k(t,o),i}();L.contextTypes={intl:c.a.object.isRequired};var B=L,U=["model"];function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}t.a=function(e){var t=e.model,r=q(e,U);return a.a.createElement(l.Control.input,W({model:t,component:B},r))}}}]);